# =========================================================================================
#  Sub-Store Mihomo Smart æ¨¡æ¿
# =========================================================================================

# ------------------------------
# æœºåœºè®¢é˜…
# ------------------------------
proxy-providers:
  sub:
    type: http
    # !! é‡è¦: Sub-Store ä¼šè‡ªåŠ¨å°†è®¢é˜…é“¾æ¥æ›¿æ¢ {{.sub}} å˜é‡ !!
    url: "{{.sub}}"
    path: ./sub_provider.yaml
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    # æ’é™¤ç¦»çº¿èŠ‚ç‚¹
    exclude-filter: "ç¦»çº¿"

# ------------------------------
# å†…ç½®èŠ‚ç‚¹
# ------------------------------
proxies:
  - { name: "ğŸ¯ å…¨çƒç›´è¿", type: direct }
  - { name: "ğŸš« æ‹’ç»è¿æ¥", type: reject }

# ------------------------------
# ç­–ç•¥ç»„
# ------------------------------
proxy-groups:
  # --- åŸºç¡€é€‰æ‹©å™¨ ---
  - { name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", type: select, proxies: ["ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡°ğŸ‡· éŸ©å›½", "ğŸ‡¹ğŸ‡¼ å°æ¹¾", "ğŸ‡¬ğŸ‡§ è‹±å›½", "ğŸ‡©ğŸ‡ª å¾·å›½", "ğŸ‡¨ğŸ‡­ ç‘å£«", "ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš", "ğŸ‡¦ğŸ‡ª é˜¿è”é…‹", "ğŸ‡®ğŸ‡³ å°åº¦", "ğŸ“¥ å¤§æµé‡ä¸“ç”¨", "ğŸ¯ å…¨çƒç›´è¿", "ğŸš« æ‹’ç»è¿æ¥"] }
  - { name: "ğŸ“¥ å¤§æµé‡ä¸“ç”¨", type: select, proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½-å¤§æµé‡", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-å¤§æµé‡", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-å¤§æµé‡", "ğŸ¯ å…¨çƒç›´è¿"] }
  - { name: "ğŸŸ æ¼ç½‘ä¹‹é±¼", type: select, proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ¯ å…¨çƒç›´è¿"] }

  # --- æœåŠ¡åˆ†æµ ---
  - { name: "ğŸ¤– ChatGPT", type: select, proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ“¹ YouTube", type: select, proxies: ["ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ¥ Netflix", type: select, proxies: ["ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡°ğŸ‡· éŸ©å›½", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸµ TikTok", type: select, proxies: ["ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡°ğŸ‡· éŸ©å›½", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ Apple", type: select, proxies: ["ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "â“‚ï¸ Microsoft", type: select, proxies: ["ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ“Š Google", type: select, proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ§‘â€ğŸ’» GitHub", type: select, proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }
  - { name: "ğŸ’¬ Telegram", type: select, proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] }

  # --- åœ°åŒºç­–ç•¥ç»„ (ä»¥æ—¥æœ¬ä¸ºä¾‹) ---
  - { name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", type: select, proxies: ["ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ™ºèƒ½", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ•…éšœè½¬ç§»", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)æ—¥æœ¬|ä¸œäº¬|JP|Japan", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ•…éšœè½¬ç§»", type: fallback, interval: 300, proxies: ["ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹åŠ¨", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ™ºèƒ½"], lazy: false }
  - { name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)æ—¥æœ¬|ä¸œäº¬|JP|Japan" }

  # --- å¤§æµé‡åœ°åŒºç­–ç•¥ç»„ ---
  - { name: "ğŸ‡ºğŸ‡¸ ç¾å›½-å¤§æµé‡", type: url-test, include-all: true, interval: 300, tolerance: 50, filter: "(?i)ç¾å›½|US|United States", exclude-filter: "(?i)1å€|ç¦»çº¿" }
  - { name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-å¤§æµé‡", type: url-test, include-all: true, interval: 300, tolerance: 50, filter: "(?i)æ—¥æœ¬|ä¸œäº¬|JP|Japan", exclude-filter: "(?i)1å€|ç¦»çº¿" }
  - { name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-å¤§æµé‡", type: url-test, include-all: true, interval: 300, tolerance: 50, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|SG|Singapore", exclude-filter: "(?i)1å€|ç¦»çº¿" }

  # --- å…¶ä»–åœ°åŒºç­–ç•¥ç»„ (å¤åˆ¶ç²˜è´´ä¿®æ”¹åœ°åŒºåå³å¯) ---
  - { name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", type: select, proxies: ["ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ™ºèƒ½", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ•…éšœè½¬ç§»", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|SG|Singapore", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ•…éšœè½¬ç§»", type: fallback, interval: 300, proxies: ["ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ‰‹åŠ¨", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ™ºèƒ½"], lazy: false }
  - { name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|SG|Singapore" }

  - { name: "ğŸ‡ºğŸ‡¸ ç¾å›½", type: select, proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½-æ™ºèƒ½", "ğŸ‡ºğŸ‡¸ ç¾å›½-æ•…éšœè½¬ç§»", "ğŸ‡ºğŸ‡¸ ç¾å›½-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡ºğŸ‡¸ ç¾å›½-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)ç¾å›½|US|United States|åœ£ä½•å¡|é˜¿ä»€æœ¬|æ´›æ‰çŸ¶|å‡¤å‡°åŸ", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡ºğŸ‡¸ ç¾å›½-æ•…éšœè½¬ç§»", type: fallback, interval: 300, proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½-æ‰‹åŠ¨", "ğŸ‡ºğŸ‡¸ ç¾å›½-æ™ºèƒ½"], lazy: false }
  - { name: "ğŸ‡ºğŸ‡¸ ç¾å›½-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)ç¾å›½|US|United States|åœ£ä½•å¡|é˜¿ä»€æœ¬|æ´›æ‰çŸ¶|å‡¤å‡°åŸ" }

  - { name: "ğŸ‡°ğŸ‡· éŸ©å›½", type: select, proxies: ["ğŸ‡°ğŸ‡· éŸ©å›½-æ™ºèƒ½", "ğŸ‡°ğŸ‡· éŸ©å›½-æ•…éšœè½¬ç§»", "ğŸ‡°ğŸ‡· éŸ©å›½-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡°ğŸ‡· éŸ©å›½-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)éŸ©å›½|é¦–å°”|KR|Korea", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡°ğŸ‡· éŸ©å›½-æ•…éšœè½¬ç§»", type: fallback, interval: 300, proxies: ["ğŸ‡°ğŸ‡· éŸ©å›½-æ‰‹åŠ¨", "ğŸ‡°ğŸ‡· éŸ©å›½-æ™ºèƒ½"], lazy: false }
  - { name: "ğŸ‡°ğŸ‡· éŸ©å›½-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)éŸ©å›½|é¦–å°”|KR|Korea" }

  - { name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾", type: select, proxies: ["ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ™ºèƒ½", "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ•…éšœè½¬ç§»", "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)å°æ¹¾|TW|Taiwan", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ•…éšœè½¬ç§»", type: fallback, interval: 300, proxies: ["ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹åŠ¨", "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ™ºèƒ½"], lazy: false }
  - { name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)å°æ¹¾|TW|Taiwan" }

  # å…¶ä»–åœ°åŒºå¯ä»¥ä¾æ­¤ç±»æ¨ï¼Œè¿™é‡Œä¸ºäº†ç®€æ´åªåˆ—å‡ºä¸»è¦åœ°åŒº
  - { name: "ğŸ‡¬ğŸ‡§ è‹±å›½", type: select, proxies: ["ğŸ‡¬ğŸ‡§ è‹±å›½-æ™ºèƒ½", "ğŸ‡¬ğŸ‡§ è‹±å›½-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡¬ğŸ‡§ è‹±å›½-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)è‹±å›½|UK|Britain", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡¬ğŸ‡§ è‹±å›½-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)è‹±å›½|UK|Britain" }

  - { name: "ğŸ‡©ğŸ‡ª å¾·å›½", type: select, proxies: ["ğŸ‡©ğŸ‡ª å¾·å›½-æ™ºèƒ½", "ğŸ‡©ğŸ‡ª å¾·å›½-æ‰‹åŠ¨"] }
  - { name: "ğŸ‡©ğŸ‡ª å¾·å›½-æ™ºèƒ½", type: smart, include-all: true, interval: 300, uselightgbm: true, collectdata: true, filter: "(?i)å¾·å›½|Germany|DE", exclude-filter: "(?i)0\.0[12]å€|ç¦»çº¿" }
  - { name: "ğŸ‡©ğŸ‡ª å¾·å›½-æ‰‹åŠ¨", type: select, include-all: true, filter: "(?i)å¾·å›½|Germany|DE" }

# ------------------------------
# è§„åˆ™é›†
# ------------------------------
rules:
  - RULE-SET,private,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple,ğŸ Apple
  - RULE-SET,microsoft,â“‚ï¸ Microsoft
  - RULE-SET,google,ğŸ“Š Google
  - RULE-SET,openai,ğŸ¤– ChatGPT
  - RULE-SET,netflix,ğŸ¥ Netflix
  - RULE-SET,youtube,ğŸ“¹ YouTube
  - RULE-SET,tiktok,ğŸµ TikTok
  - RULE-SET,telegram,ğŸ’¬ Telegram
  - RULE-SET,github,ğŸ§‘â€ğŸ’» GitHub
  - RULE-SET,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn,ğŸ¯ å…¨çƒç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ------------------------------
# è§„åˆ™é›†æä¾›è€…
# ------------------------------
rule-providers:
  # å¼•ç”¨é”šç‚¹å®šä¹‰
  private: &domain-provider { type: http, interval: 86400, behavior: domain, format: mrs }
  ip: &ip-provider { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  classical: &classical-provider { type: http, interval: 86400, behavior: classical, format: text }

  # å…·ä½“è§„åˆ™é›†
  private: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs" }
  apple: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs" }
  microsoft: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs" }
  google: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs" }
  openai: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.mrs" }
  netflix: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs" }
  youtube: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs" }
  tiktok: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs" }
  telegram: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs" }
  github: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs" }
  gfw: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  cn: { <<: *domain-provider, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }

# ------------------------------
# DNS è®¾ç½®
# ------------------------------
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
  fake-ip-filter:
    - "geosite:cn"
    - "+.lan"
    - "+.local"

# ------------------------------
# å…¶ä»–è®¾ç½®
# ------------------------------
mode: rule
global-client-fingerprint: chrome
log-level: warning
tcp-concurrent: true
unified-delay: true
profile:
  store-selected: true
  store-fake-ip: true
